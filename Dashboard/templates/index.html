<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Advanced Candlestick Chart</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; }
    #sidebar { width: 220px; background:#fff; border-right:1px solid #eee; padding:12px; box-sizing:border-box; overflow:auto; }
    #main { flex:1; display:flex; flex-direction:column; }
    #controls { padding:8px 12px; border-bottom:1px solid #eee; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    #chart-area { flex:1; display:flex; flex-direction:column; gap:8px; padding:8px; box-sizing:border-box; overflow:hidden; }
    .chart-box { flex:1; min-height:120px; background:#fff; border:1px solid #eee; border-radius:6px; overflow:hidden; }
    label.control { display:block; margin-bottom:8px; cursor:pointer; }
    .group-title { font-weight:600; margin-top:12px; margin-bottom:6px; font-size:13px; }
    .small { font-size:12px; color:#666; }
    #left-controls { margin-bottom:8px; }
    #chart { height: 50%; }            /* main container; will be overridden by JS resize */
    #chart-main { height: 60%; }
    #chart-rsi { height: 20%; }
    #chart-macd { height: 20%; }
    input[type="checkbox"] { margin-right:6px; }
  </style>

  <script src="https://unpkg.com/lightweight-charts@4.0.1/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
  <div id="sidebar">
    <h3>Indicators</h3>
    <div id="left-controls">
      <label class="control"><input id="toggle-sma20" type="checkbox" checked> SMA 20</label>
      <label class="control"><input id="toggle-sma50" type="checkbox" checked> SMA 50</label>
      <label class="control"><input id="toggle-ema12" type="checkbox" checked> EMA 12</label>
      <label class="control"><input id="toggle-bb" type="checkbox" checked> Bollinger Bands (20,2)</label>
      <label class="control"><input id="paceproToggle" type="checkbox" checked> PacePro</label>

      <div class="group-title">Oscillators (separate panels)</div>
      <label class="control"><input id="toggle-rsi" type="checkbox" checked> RSI 14</label>
      <label class="control"><input id="toggle-macd" type="checkbox" checked> MACD (12,26,9)</label>
    </div>

    <div class="group-title">Range</div>
    <div class="small">Start / End</div>
    <label class="small">Start:
      <input id="start" type="datetime-local">
    </label>
    <label class="small">End:
      <input id="end" type="datetime-local">
    </label>
    <div style="margin-top:8px;">
      <button id="btnLoad">Load Range</button>
      <button id="btnLatest">Load Latest</button>
    </div>

    <div style="margin-top:12px;" class="small">
      Data range and lazy-loading preserved. Indicators update automatically.
    </div>
  </div>

  <div id="main">
    <div id="controls"></div>
    <div id="chart-area">
      <div id="chart-main" class="chart-box"></div>
      <div id="chart-rsi" class="chart-box"></div>
      <div id="chart-macd" class="chart-box"></div>
    </div>
  </div>

  <script src="/static/chart.js"></script>
</body>
</html>
